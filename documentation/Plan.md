# План автоматизации тестирования покупки тура.
## *1. Перечень автоматизируемых сценариев:*
## Возможность покупки тура _двумя_ способами:
1. Оплата по дебетовой карте
2. Оплата через кредит по данным карты

## Карты, представленные для тестирования (файл data.json):
- 4444 4444 4444 4441, status APPROVED
- 4444 4444 4444 4442, status DECLINED
## *Позитивные сценарии:*

**1.** Оплата по дебетовой карте со статусом APPROVED:
### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить"
3. Ввести в поле "Номер карты" - 4444 4444 4444 4441
4. Ввести в поле "Месяц" - любое число от 01 до 12
5. Ввести в поле "Год" - последние две цифры года (например: 21)
6. Ввести в поле "Владелец" - валидное имя (например: Alexander)
7. Ввести в поле "CVC/CVV" - 3-х значный номер (например: 123)
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: появилось всплывающее окно "Операция одобрена Банком", в БД в payment_entity появилась запись со статусом APPROVED


**2.** Оплата по дебетовой карте со статусом DECLINED:
### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить"
3. Ввести в поле "Номер карты" - 4444 4444 4444 4442
4. Ввести в поле "Месяц" - любое число от 01 до 12
5. Ввести в поле "Год" - последние две цифры года (например: 21)
6. Ввести в поле "Владелец" - валидное имя (например: Daria)
7. Ввести в поле "CVC/CVV" - 3-х значный номер (например: 123)
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: появилось всплывающее окно "Ошибка! Банк отказал в проведении операции", в БД в payment_entity появилась запись со статусом DECLINED


**3.** Оплата через кредит по данным карты со статусом APPROVED:
### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить в кредит"
3. Ввести в поле "Номер карты" - 4444 4444 4444 4441
4. Ввести в поле "Месяц" - любое число от 01 до 12
5. Ввести в поле "Год" - последние две цифры года (например: 21)
6. Ввести в поле "Владелец" - валидное имя (например: Vladimir)
7. Ввести в поле "CVC/CVV" - 3-х значный номер (например: 123)
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: появилось всплывающее окно "Операция одобрена Банком", в БД в credit_request_entity появилась запись со статусом APPROVED


**4.** Оплата через кредит по данным карты со статусом DECLINED:
### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить в кредит"
3. Ввести в поле "Номер карты" - 4444 4444 4444 4442
4. Ввести в поле "Месяц" - любое число от 01 до 12
5. Ввести в поле "Год" - последние две цифры года (например: 21)
6. Ввести в поле "Владелец" - валидное имя (например: Anastasia)
7. Ввести в поле "CVC/CVV" - 3-х значный номер (например: 123)
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: появилось всплывающее окно "Ошибка! Банк отказал в проведении операции", в БД в credit_request_entity появилась запись со статусом DECLINED


### *Негативные сценарии:*
**1.** Оплата по карте, указан невалидный номер карты:
### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить"
3. Ввести в поле "Номер карты" - некорректный номер (например: 4444 4444 4444)
4. Ввести в поле "Месяц" - любое число от 01 до 12
5. Ввести в поле "Год" - последние две цифры года (например: 21)
6. Ввести в поле "Владелец" - валидное имя (например: Anastasia)
7. Ввести в поле "CVC/CVV" - 3-х значный номер (например: 123)
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: внизу поля "Номер карты" появилось сообщение об ошибке "Неверный формат"


**2.** Оплата по карте, указан невалидный месяц:
### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить"
3. Ввести в поле "Номер карты" - 4444 4444 4441
4. Ввести в поле "Месяц" - число 00 или число 13
5. Ввести в поле "Год" - последние две цифры года (например: 21)
6. Ввести в поле "Владелец" - валидное имя (например: Anastasia)
7. Ввести в поле "CVC/CVV" - 3-х значный номер (например: 123)
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: внизу поля "Месяц" появилось сообщение об ошибке "Неверно указан срок действия карты"

**3.** Оплата по карте, указан год с истекшим сроком действия:

### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить"
3. Ввести в поле "Номер карты" - 4444 4444 4444 4441
4. Ввести в поле "Месяц" - любое число от 01 до 12
5. Ввести в поле "Год" - последние две цифры года (например: 20 или 27)
6. Ввести в поле "Владелец" - валидное имя (например: Alexander)
7. Ввести в поле "CVC/CVV" - 3-х значный номер (например: 123)
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: внизу поля "Год" появилось сообщение об ошибке "Истёк срок действия карты" или "Неверно указан срок действия карты"


**4.** Оплата по карте, указано некорректное имя:
### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить"
3. Ввести в поле "Номер карты" - 4444 4444 4444 4441
4. Ввести в поле "Месяц" - любое число от 01 до 12
5. Ввести в поле "Год" - последние две цифры года (например: 21)
6. Ввести в поле "Владелец" - некорректное имя (например: ggg или 888)
7. Ввести в поле "CVC/CVV" - 3-х значный номер (например: 123)
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: внизу поля "Владелец" появилось сообщение об ошибке "Неверное имя" 

**5.** Оплата по карте, указано некорректное значение CVC/CVV:

### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить"
3. Ввести в поле "Номер карты" - 4444 4444 4444 4441
4. Ввести в поле "Месяц" - любое число от 01 до 12
5. Ввести в поле "Год" - последние две цифры года (например: 21)
6. Ввести в поле "Владелец" - валидное имя (например: Alexander)
7. Ввести в поле "CVC/CVV" - 2-х значный номер (например: 12)
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: внизу поля "CVC/CVV" появилось сообщение об ошибке "Неверный формат"


**6.** Оплата по карте, указаны пустые поля:
### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить"
3. Оставить все поля пустыми
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: под каждым из полей появляется сообщение "Неверный формат", только под полем "Владелец" появляется сообщение "Поле обязательно для заполнения"


**7.** Кредит по данным карты, указан невалидный номер карты:
### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить в кредит"
3. Ввести в поле "Номер карты" - некорректный номер (например: 4444 4444 4444)
4. Ввести в поле "Месяц" - любое число от 01 до 12
5. Ввести в поле "Год" - последние две цифры года (например: 21)
6. Ввести в поле "Владелец" - валидное имя (например: Anastasia)
7. Ввести в поле "CVC/CVV" - 3-х значный номер (например: 123)
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: внизу поля "Номер карты" появилось сообщение об ошибке "Неверный формат"


**8.** Кредит по данным карты, указан невалидный месяц:
### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить в кредит"
3. Ввести в поле "Номер карты" - 4444 4444 4441
4. Ввести в поле "Месяц" - число 00 или число 13
5. Ввести в поле "Год" - последние две цифры года (например: 21)
6. Ввести в поле "Владелец" - валидное имя (например: Anastasia)
7. Ввести в поле "CVC/CVV" - 3-х значный номер (например: 123)
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: внизу поля "Месяц" появилось сообщение об ошибке "Неверно указан срок действия карты"


**9.** Кредит по данным карты, указан год с истекшим сроком действия:
### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить в кредит"
3. Ввести в поле "Номер карты" - 4444 4444 4444 4441
4. Ввести в поле "Месяц" - любое число от 01 до 12
5. Ввести в поле "Год" - последние две цифры года (например: 20 или 27)
6. Ввести в поле "Владелец" - валидное имя (например: Alexander)
7. Ввести в поле "CVC/CVV" - 3-х значный номер (например: 123)
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: внизу поля "Год" появилось сообщение об ошибке "Истёк срок действия карты" или "Неверно указан срок действия карты"


**10.** Кредит по данным карты, указано некорректное имя:
### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить в кредит"
3. Ввести в поле "Номер карты" - 4444 4444 4444 4441
4. Ввести в поле "Месяц" - любое число от 01 до 12
5. Ввести в поле "Год" - последние две цифры года (например: 21)
6. Ввести в поле "Владелец" - некорректное имя (например: ggg или 888)
7. Ввести в поле "CVC/CVV" - 3-х значный номер (например: 123)
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: внизу поля "Владелец" появилось сообщение об ошибке "Неверное имя" 


**11.** Кредит по данным карты, указано некорректное значение CVC/CVV:
### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить в кредит"
3. Ввести в поле "Номер карты" - 4444 4444 4444 4441
4. Ввести в поле "Месяц" - любое число от 01 до 12
5. Ввести в поле "Год" - последние две цифры года (например: 21)
6. Ввести в поле "Владелец" - валидное имя (например: Alexander)
7. Ввести в поле "CVC/CVV" - 2-х значный номер (например: 12)
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: внизу поля "CVC/CVV" появилось сообщение об ошибке "Неверный формат"


**12.** Кредит по данным карты, указаны пустые поля:
### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить в кредит"
3. Оставить все поля пустыми
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: под каждым из полей появляется сообщение "Неверный формат", только под полем "Владелец" появляется сообщение "Поле обязательно для заполнения"


## *2. Перечень используемых инструментов с обоснованием выбора:*

- СУБД MySQL и PostgreSQL - требование задачи.
 - Node.js - в качестве симулятора банковских сервисов по требованию задачи.
 - Docker и Docker-compose - для запуска СУБД и Node.js.
 - OpenJDK 64-Bit Server VM AdoptOpenJDK (build 11.0.6+10, mixed mode) - для запуска тестируемого приложения и для разработки тестов. Данная версия уже установлена и удовлетворяет требованиям.
 - Gradle - для автоматической сборки и запуска тестов.
 - JUnit 5 (junit-jupiter) - известная платформа для написания тестов.
 - Faker (javafaker) - известный инструмент для генерации тестовых данных.
 - Selenide - для написания тестов web-интерфейса.
 - Apache Commons Db Utils - для уменьшения количества кода связанного с получением данных из БД.
 - Lombok - для уменьшения количества кода связанного со стандартными методами классов.
 - Allure - для генерации отчетов о тестировании. Наиболее подробный и не требующий значительных ресурсов для установки и поддержания из известных.

## *3. Перечень и описание возможных рисков при автоматизации:*

- Невозможность запуска веб-приложения и работы с ним: приложения не загружается по указанному адресу, происходит ошибка на стороне сервера (статус 500)
- Проблемы с составлением селекторов элементов из-за отсутствия уникальных идентификаторов
- Если программисты запилили новую фичу, а нас тестировщиков не предупредили
- Возможна смена кода страницы либо css-селекторов, придется править код
- Нет реальной документации к сервису
- Проблемы с интернет соединением

## *4. Интервальная оценка с учётом рисков в часах:*

### Необходимое время на тестирование веб-сервера составляет 41 час, с учетом рисков - 55 часов:

- подготовка окружения, инфраструктуры, развертывание БД - 8 часов
- написание авто-тестов, тестирование - 30 часов
- формирование и анализ отчетов - 8 часов

## *5. План сдачи работ:*

- Планирование автоматизации тестирования: с 19.04.2023 до 21.04.2023
- Непосредственно сама автоматизация: с 25.04.2023 до 28.04.2023
- Подготовка отчётных документов по итогам автоматизированного тестирования: с 30.04.2023 до 02.05.2023
- Подготовка отчётных документов по итогам автоматизации: с 02.05.2023 до 04.05.2023
